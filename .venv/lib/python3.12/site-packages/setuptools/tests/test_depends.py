import sys

from setuptools import depends


class TestGetModuleConstant:
    def test_basic(self):
        """
        Invoke get_module_constant on a module in
        the test package.
        """
        mod_name = 'setuptools.pytest_with_core_plugin.mod_with_constant'
        val = depends.get_module_constant(mod_name, 'value')
        assert val == 'three, sir!'
        assert 'setuptools.pytest_with_core_plugin.mod_with_constant' not in sys.modules
